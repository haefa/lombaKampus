<!--
  Generated template for the ChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title text-center>{{user_name}}<button ion-button clear class="invisibleButton"></button></ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content
          pullingIcon="arrow-dropdown"
          pullingText="Pull down to refresh"
          refreshingSpinner="circles"
          refreshingText="Refreshing...">
        </ion-refresher-content>
      </ion-refresher>
<br>
    <div *ngFor="let data of chatData" id="chatMessages">
      <div *ngIf='data.id_pengirim == id_user' class="message" (press)="delete(data.id_chat)"><!--  | reverse; let last = last -->
        <div class="innerMessage messageRight">
          <div class="messageContent">{{data.pesan}}</div>
          <div text-right class="messageTimeRight" format="HH:mm">{{data.tanggal | date: "dd MMM, H:mm" }}</div>
        </div>
        <!-- {{last ? scrollToBottom() : ''}} -->
      </div>

      <div *ngIf='data.id_pengirim != id_user' class="message"><!--  | reverse; let last = last -->
        <img  class="pict" src="http://149.28.32.85:4444/getPhoto/profil/{{data.id_pengirim}}.jpg" />
        <div class="innerMessage messageLeft">
          <div class="messageContent">{{data.pesan}}</div>
          <div text-left class="messageTimeLeft">{{data.tanggal | date: "dd MMM, H:mm" }}</div>
        </div>
        <!-- {{last ? scrollToBottom() : ''}} -->
      </div>

    </div>   

</ion-content>

<ion-footer class="footerBackground" no-padding>
  <ion-row no-padding>

    <ion-col col-10 no-padding class="inputArea">
      <ion-textarea class="inputText" [(ngModel)]="message" name="message" placeholder="Text message.." type="text" #pesan="ngModel" required autosize></ion-textarea>
    </ion-col>
    
    <ion-col col-2 no-padding text-center>
      <span class="IconSend"><ion-icon (click)="sendChat()" name="md-send" class="IconSendSize"></ion-icon></span>
    </ion-col>
  </ion-row>
</ion-footer>
